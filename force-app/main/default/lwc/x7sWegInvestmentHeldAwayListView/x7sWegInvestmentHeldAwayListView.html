<template>
  <template if:true={isDisplayComponent}>
    <div class="investmentHeader slds-m-bottom_medium">{componentTitle}</div>
    <!-- <p if:true={introParagraph} class="slds-m-top_small slds-text-body_regular">
            {introParagraph}
        </p> -->
    <template if:true={isLoading}>
      <lightning-spinner
        alternative-text="Loading"
        size="medium"
        variant="brand"
      ></lightning-spinner>
    </template>

    <div class="investmentListContainer slds-p-top_small">
      <lightning-datatable
        key-field="Id"
        data={dataList}
        columns={columns}
        hide-checkbox-column="true"
        onrowaction={handleRowAction}
        class="investmentTable slds-max-medium-table_stacked-horizontal"
        default-sort-direction={defaultSortDirection}
        sorted-direction={sortDirection}
        sorted-by={sortedBy}
        onsort={onHandleSort}
      >
      </lightning-datatable>
    </div>
  </template>

  <div class="slds-m-top_medium slds-grid">
    <span class="slds-grow">
      <span class={addHeldAway}>
        <button
          class="addHeldAway slds-text-heading_small"
          onclick={handleAddInvestmentHeldAwayClick}
        >
          <div class="iconContainer heldAwayIcon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 52 52"
              id="add"
            >
              <path
                d="M30 29h16.5c.8 0 1.5-.7 1.5-1.5v-3c0-.8-.7-1.5-1.5-1.5H30c-.6 0-1-.4-1-1V5.5c0-.8-.7-1.5-1.5-1.5h-3c-.8 0-1.5.7-1.5 1.5V22c0 .6-.4 1-1 1H5.5c-.8 0-1.5.7-1.5 1.5v3c0 .8.7 1.5 1.5 1.5H22c.6 0 1 .4 1 1v16.5c0 .8.7 1.5 1.5 1.5h3c.8 0 1.5-.7 1.5-1.5V30c0-.6.4-1 1-1z"
              ></path>
            </svg>
          </div>
          <span class="slds-p-left_small"><b>{buttonLabel}</b></span
          >&nbsp;
        </button>
      </span>
    </span>
    <span class="totalAmount slds-grow slds-text-align_right"
      >$
      <lightning-formatted-number
        value={totalAmt}
        format-style="decimal"
        maximum-fraction-digits="0"
        currency-code="USD"
      >
      </lightning-formatted-number>
    </span>
  </div>

  <template if:true={isModalOpen}>
    <section
      role="dialog"
      tabindex="-1"
      aria-labelledby="modal-heading-01"
      aria-modal="true"
      aria-describedby="modal-content-id-1"
      class="slds-modal slds-fade-in-open"
    >
      <div class="slds-modal__container slds-p-around_small">
        <header class="slds-modal__header">
          <button
            class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
            title="Close"
            onclick={closeModal}
          >
            <lightning-icon
              icon-name="utility:close"
              alternative-text="close"
              variant="inverse"
              size="small"
            ></lightning-icon>
            <span class="slds-assistive-text">Close</span>
          </button>
          <div class="investmentHeader">{investmentHeldAwayHeader}</div>
        </header>

        <div
          class="slds-modal__content slds-p-around_medium slds-scrollable_none"
          id="modal-content-id-1"
          style="overflow-y: visible !important"
        >
          <lightning-layout multiple-rows="true" horizontal-align="center">
            <!-- <template if:true={isDisplayRecordType}>

                            <lightning-layout-item size="12" large-device-size="12" medium-device-size="12"
                                small-device-size="12">
                                <lightning-combobox name="RecordType" label="Record Type"
                                    value={investmentHeldAwayrecordType}
                                    class="inputField slds-m-vertical_medium validateHeldAwayRecordType"
                                    options={investmentHeldAwayRecordTypeOptions}
                                    onchange={handleHeldAwayRecordTypeChange} required>
                                </lightning-combobox>
                            </lightning-layout-item>
                        </template> -->

            <lightning-layout-item
              size="12"
              large-device-size="6"
              medium-device-size="12"
              small-device-size="12"
            >
              <lightning-input
                class="inputField slds-m-vertical_medium validateHeldAwayAccountNumber"
                name="accountName"
                type="text"
                label="Account Name"
                value={investmentHeldAwayAccountName}
                onchange={handleHeldAwayAccountNameChange}
                required
              >
              </lightning-input>
            </lightning-layout-item>

            <lightning-layout-item
              size="12"
              large-device-size="6"
              medium-device-size="12"
              small-device-size="12"
            >
              <lightning-combobox
                name="Custodian"
                label="Custodian"
                value={investmentHeldAwayCustodian}
                class="inputField slds-m-vertical_medium validateHeldAwayCustodian custodian-dropdown"
                options={investmentHeldAwayCustodianOptions}
                onchange={handleHeldAwayCustodianChange}
              >
              </lightning-combobox>
            </lightning-layout-item>

            <lightning-layout-item
              size="12"
              large-device-size="6"
              medium-device-size="12"
              small-device-size="12"
            >
              <lightning-combobox
                name="AccountType"
                label="Account Type"
                value={investmentHeldAwayAccountType}
                class="inputField slds-m-vertical_medium validateHeldAwayAccountType account-type-dropdown"
                options={investmentHeldAwayAccountTypeOptions}
                onchange={handleHeldAwayAccountTypeChange}
              >
              </lightning-combobox>
            </lightning-layout-item>

            <lightning-layout-item
              size="12"
              large-device-size="6"
              medium-device-size="12"
              small-device-size="12"
            >
            </lightning-layout-item>

            <lightning-layout-item
              size="12"
              large-device-size="6"
              medium-device-size="12"
              small-device-size="12"
            >
              <lightning-combobox
                name="OwnerType"
                label="Account Owner"
                value={investmentHeldAwayOwner}
                class="inputField slds-m-vertical_medium validateHeldAwayOwner"
                options={investmentHeldAwayOwnerOptions}
                onchange={handleHeldAwayOwnerChange}
                required
              >
              </lightning-combobox>
            </lightning-layout-item>

            <lightning-layout-item
              size="12"
              large-device-size="6"
              medium-device-size="12"
              small-device-size="12"
            >
              <lightning-input
                class="inputField slds-m-vertical_medium validateHeldAwayAccountNumber"
                name="accountNumber"
                type="text"
                label="Account Number"
                value={investmentHeldAwayAccountNumber}
                onchange={handleHeldAwayAccountNumberChange}
              >
              </lightning-input>
            </lightning-layout-item>

            <lightning-layout-item
              size="12"
              large-device-size="6"
              medium-device-size="12"
              small-device-size="12"
            >
              <lightning-input
                class="inputField slds-m-vertical_medium validateHeldAwayValue"
                name="Value"
                type="number"
                label="Value (Round to nearest dollar)"
                value={investmentHeldAwayValue}
                onchange={handleHeldAwayValueChange}
                data-id="Value"
                formatter="currency"
                step="1"
              >
              </lightning-input>
            </lightning-layout-item>

            <lightning-layout-item
              size="12"
              large-device-size="6"
              medium-device-size="12"
              small-device-size="12"
            >
              <lightning-input
                class="inputField slds-m-vertical_medium validateHeldAwayAsOfDate"
                name="AsOfDate"
                type="Date"
                label="As Of Date"
                value={investmentHeldAwayAsOfDate}
                onchange={handleHeldAwayAsOfDateChange}
                data-id="AsOfDate"
              >
              </lightning-input>
            </lightning-layout-item>
          </lightning-layout>
        </div>

        <footer class="slds-modal__footer">
          <button
            class="addHeldAway cancelButton slds-float_left slds-button"
            onclick={closeModal}
            title={cancelButtonLabel}
          >
            {cancelButtonLabel}
          </button>

          <button
            class="slds-button slds-button_brand slds-float_left"
            onclick={submitDetails}
            title={investmentHeldAwayBtnLabel}
          >
            {investmentHeldAwayBtnLabel}
          </button>
        </footer>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>
</template>